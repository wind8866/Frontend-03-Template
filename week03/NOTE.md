# 周总结
本周内容主要是将HTML字符串与style字符串处理成dom树，其过程经过了词法分析与语法分析。大致步骤可以整理成如下列表

1. 找出HTML的词法规律使用状态机分离出：开始标签、文本、结束标签、自封闭标签
2. 使用一个token函数接受状态机传入的各种状态值，使用数据结构栈处理先后进入函数的状态：开始标签入栈，结束标签出栈，自封闭和文本标签。又一个非常非常关键的点是每次将最后一个栈作为栈顶，后入的栈都作为该栈的子元素。这样就可以形成DOM树
3. 取出style的子节点（文本节点），使用一个`css`的npm依赖进行词法语法分析，处理成CSS规则列表。
4. 采用从子到父的匹配规则，在每次节点入栈时进行样式规则匹配。匹配成功则将style规则添加到DOM树。

----
# 学习笔记
### 【预习】一个浏览器是如何工作的（对应阶段二、三内容）
学习[toy-html-parser](https://github.com/aimergenge/toy-html-parser)代码
#### 解析HTML，构建DOM树

**分词（token）**
接受字符流，每次读取一个字符串，使用状态机每次决策，解析成想要的词。
状态机有当前状态，每读入一个字符都去判断是否是当前状态，不是则跳转到其他状态。状态机就能将字符串分割成一个一个的词。

**构建DOM树**
使用栈，入栈，出栈


---


- [ ] 解析response body时把最后的字节长度值0也给加里面了，还有html的开头也要优化一下


