<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>广度优先搜索</title>
    <style>
        .wrap {
            font-size: 0;
            width: 900px;
        }
        .wrap .item {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-right: 1px solid #fff;
            border-bottom: 1px solid #fff;
            background-color: #ddd;
        }
        .wrap .item[data-status="1"] {
            background-color: #888;
        }
    </style>
</head>
<body>
<button id="save">save</button>
<!-- <button id="clean">clean</button> -->
<div id="wrap" class="wrap"></div>
<script>
let pressDown = false;
const wrap = document.querySelector('#wrap');
let map = [];
init();

function review() {
    const nodeList = wrap.children;
    for(let i = 0;i < map.length;i++) {
        nodeList[i].dataset.status = map[i];
    }
}

function init() {
    const save = document.querySelector('#save');
    wrap.addEventListener('mousedown', () => {pressDown = true});
    wrap.addEventListener('mouseup', () => {pressDown = false});
    wrap.addEventListener('contextmenu', event => {
        event.preventDefault();
        map.fill(0)
        review();
    });
    save.addEventListener('click', () => {
        window.localStorage.setItem('map', JSON.stringify(map));
    });

    if (window.localStorage.getItem('map')) {
        map = JSON.parse(window.localStorage.getItem('map'));
    } else {
        map = Array(10000);
        map.fill(0)
    }

    map.forEach((status, index) => {
        const grid = document.createElement('div');
        grid.addEventListener('mouseover', event => {
            if (pressDown) {
                const target = event.target;
                map[target.dataset.index] = 1;
                target.dataset.status = 1
            }
        })
        grid.classList.add('item');
        grid.dataset.status = status;
        grid.dataset.index = index;
        wrap.append(grid);
    });
}

</script>
</body>
</html>